<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPS 知识库管理</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 顶部导航栏 -->
        <header class="header">
            <h1><i class="fa fa-database"></i> KPS 知识库管理</h1>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 左侧功能菜单 -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <a href="#knowledge" class="nav-item active">
                        <i class="fa fa-book"></i> 知识库管理
                    </a>
                    <a href="#retrieval" class="nav-item">
                        <i class="fa fa-search"></i> 召回测试
                    </a>
                    <a href="#settings" class="nav-item">
                        <i class="fa fa-cog"></i> 设置
                    </a>
                </nav>
            </aside>

            <!-- 右侧内容区域 -->
            <div class="content-area">


                <!-- 知识库管理区域 -->
                <section id="knowledge" class="section active">
                    <div class="section-header">
                        <h2><i class="fa fa-book"></i> 知识库管理</h2>
                        <p>查看和管理已创建的知识库</p>
                    </div>
                    
                    <!-- 知识库管理子功能选项卡 -->
                    <div class="knowledge-tabs">
                        <button class="tab-btn active" data-tab="list">
                            <i class="fa fa-list"></i> 知识库列表
                        </button>
                        <button class="tab-btn" data-tab="upload">
                            <i class="fa fa-upload"></i> 文件上传
                        </button>
                        <button class="tab-btn" data-tab="chunks">
                            <i class="fa fa-file-text-o"></i> 切片预览
                        </button>
                        <button class="tab-btn" data-tab="graph">
                            <i class="fa fa-sitemap"></i> 图预览
                        </button>
                        <button class="tab-btn" data-tab="publish">
                            <i class="fa fa-paper-plane"></i> 发布管理
                        </button>
                        <button class="tab-btn" data-tab="api">
                            <i class="fa fa-code"></i> API接口
                        </button>
                    </div>
                    
                    <!-- 文件上传 -->
                    <div class="tab-content active" id="tab-upload">
                        <div class="section-header">
                            <h2><i class="fa fa-upload"></i> 文件上传</h2>
                            <p>支持上传 TXT、PDF、DOCX 格式的文件到知识库</p>
                        </div>
                        <div class="upload-container">
                            <div class="upload-area" id="upload-area">
                                <i class="fa fa-cloud-upload"></i>
                                <p>拖拽文件到此处或点击选择文件</p>
                                <input type="file" id="file-input" accept=".txt,.pdf,.docx" style="display: none;">
                                <button id="select-file-btn" class="btn btn-secondary">选择文件</button>
                            </div>
                            <div class="file-list" id="file-list"></div>
                            <div class="upload-actions">
                                <button id="upload-btn" class="btn btn-primary">开始上传</button>
                                <button id="cancel-upload-btn" class="btn btn-secondary">取消</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 知识库列表 -->
                    <div class="tab-content" id="tab-list">
                        <div class="knowledge-container">
                            <div class="knowledge-actions">
                                <button id="refresh-knowledge-btn" class="btn btn-secondary">
                                    <i class="fa fa-refresh"></i> 刷新列表
                                </button>
                                <button id="create-knowledge-btn" class="btn btn-primary">
                                    <i class="fa fa-plus"></i> 创建知识库
                                </button>
                            </div>
                            <div class="knowledge-list" id="knowledge-list">
                                <div class="empty-state">
                                    <i class="fa fa-book-o"></i>
                                    <p>暂无知识库数据</p>
                                    <button class="btn btn-primary" onclick="document.getElementById('create-knowledge-btn').click()">
                                        <i class="fa fa-plus"></i> 创建第一个知识库
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 切片预览 -->
                    <div class="tab-content" id="tab-chunks">
                        <div class="chunks-container">
                            <div class="filter-panel">
                                <input type="text" id="chunk-search" placeholder="搜索切片内容..." class="search-input">
                                <select id="chunk-filter" class="select-input">
                                    <option value="all">所有切片</option>
                                    <option value="recent">最近上传</option>
                                    <option value="long">长文本切片</option>
                                    <option value="short">短文本切片</option>
                                </select>
                            </div>
                            <div class="chunks-list" id="chunks-list">
                                <div class="empty-state">
                                    <i class="fa fa-file-o"></i>
                                    <p>暂无切片数据，请先上传文件</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 图预览 -->
                    <div class="tab-content" id="tab-graph">
                        <div class="graph-container">
                            <div class="graph-header">
                                <h3><i class="fa fa-sitemap"></i> 图数据预览</h3>
                                <div class="graph-actions">
                                    <button id="refresh-graph-btn" class="btn btn-secondary">
                                        <i class="fa fa-refresh"></i> 刷新图数据
                                    </button>
                                    <button id="export-graph-btn" class="btn btn-secondary">
                                        <i class="fa fa-download"></i> 导出图数据
                                    </button>
                                </div>
                            </div>
                            <!-- <div class="graph-stats">
                                <div class="stat-card">
                                    <div class="stat-number" id="node-count">0</div>
                                    <div class="stat-label">节点数量</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="relationship-count">0</div>
                                    <div class="stat-label">关系数量</div>
                                </div>
                            </div> -->
                            <div class="graph-visualization">
                                <div id="graph-canvas" style="width: 100%; height: 600px; border: 1px solid #e0e0e0; border-radius: 4px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 发布管理 -->
                    <div class="tab-content" id="tab-publish">
                        <div class="publish-container">
                            <div class="publish-info">
                                <div class="info-item">
                                    <label>知识库名称：</label>
                                    <input type="text" id="knowledge-name" placeholder="输入知识库名称" value="text_analysis">
                                </div>
                                <div class="info-item">
                                    <label>版本号：</label>
                                    <input type="text" id="version" placeholder="输入版本号" value="v1.0">
                                </div>
                                <div class="info-item">
                                    <label>描述：</label>
                                    <textarea id="description" placeholder="输入知识库描述" rows="2">这是一个基于Fast-GraphRAG的知识库</textarea>
                                </div>
                            </div>
                            <div class="publish-stats">
                                <div class="stat-card">
                                    <div class="stat-number" id="file-count">0</div>
                                    <div class="stat-label">已上传文件</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="chunk-count">0</div>
                                    <div class="stat-label">文本切片</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="entity-count">0</div>
                                    <div class="stat-label">实体数量</div>
                                </div>
                            </div>
                            <div class="publish-actions">
                                <button id="publish-btn" class="btn btn-primary btn-large">
                                    <i class="fa fa-paper-plane"></i> 发布上线
                                </button>
                                <button id="unpublish-btn" class="btn btn-warning btn-large">
                                    <i class="fa fa-pause"></i> 下线
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- API接口 -->
                    <div class="tab-content" id="tab-api">
                        <div class="api-container">
                            <div class="api-info">
                                <div class="api-item">
                                    <label>API地址：</label>
                                    <span class="api-value">http://localhost:8000</span>
                                </div>
                                <div class="api-item">
                                    <label>API状态：</label>
                                    <span class="api-value status-pending">未发布</span>
                                </div>
                            </div>
                            <div class="api-examples">
                                <div class="example-card">
                                    <div class="example-header">
                                        <h3>文件上传 API</h3>
                                        <code>POST /upload</code>
                                    </div>
                                    <div class="example-content">
                                        <pre><code class="language-bash">curl -X POST http://localhost:8000/upload \
  -F "file=@your_file.txt"</code></pre>
                                    </div>
                                </div>
                                <div class="example-card">
                                    <div class="example-header">
                                        <h3>文本导入 API</h3>
                                        <code>POST /add-text</code>
                                    </div>
                                    <div class="example-content">
                                        <pre><code class="language-bash">curl -X POST http://localhost:8000/add-text \
  -d "text=你的文本内容"</code></pre>
                                    </div>
                                </div>
                                <div class="example-card">
                                    <div class="example-header">
                                        <h3>检索 API</h3>
                                        <code>GET /retrieval</code>
                                    </div>
                                    <div class="example-content">
                                        <pre><code class="language-bash">curl -X GET "http://localhost:8000/retrieval?query=你的查询语句"</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>



                <!-- 召回测试区域 -->
                <section id="retrieval" class="section">
                    <div class="section-header">
                        <h2><i class="fa fa-search"></i> 召回测试</h2>
                        <p>测试知识库的召回效果</p>
                    </div>
                    <div class="retrieval-container">
                        <div class="retrieval-controls">
                            <div class="knowledge-select-group">
                                <label for="knowledge-select">选择知识库：</label>
                                <select id="knowledge-select" class="search-input">
                                    <option value="">请选择知识库</option>
                                </select>
                            </div>
                        </div>
                        <div class="query-input-group">
                            <textarea id="query-input" placeholder="请输入测试查询语句..." rows="3"></textarea>
                            <button id="query-btn" class="btn btn-primary">
                                <i class="fa fa-search"></i> 开始测试
                            </button>
                        </div>
                        <div class="retrieval-results" id="retrieval-results">
                            <div class="empty-state">
                                <i class="fa fa-search"></i>
                                <p>请输入查询语句进行召回测试</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 设置区域 -->
                <section id="settings" class="section">
                    <div class="section-header">
                        <h2><i class="fa fa-cog"></i> 设置</h2>
                        <p>账号管理和知识库权限设置</p>
                    </div>
                    
                    <!-- 设置子功能选项卡 -->
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="account">
                            <i class="fa fa-user"></i> 账号管理
                        </button>
                        <button class="tab-btn" data-tab="permission">
                            <i class="fa fa-lock"></i> 知识库权限管理
                        </button>
                    </div>
                    
                    <!-- 账号管理 -->
                    <div class="tab-content active" id="tab-account">
                        <div class="settings-container">
                            <div class="form-group">
                                <label>用户名</label>
                                <input type="text" class="search-input" value="admin" readonly>
                            </div>
                            <div class="form-group">
                                <label>邮箱</label>
                                <input type="email" class="search-input" value="admin@example.com" readonly>
                            </div>
                            <div class="form-group">
                                <label>手机号码</label>
                                <input type="tel" class="search-input" value="13800138000" readonly>
                            </div>
                            <div class="form-group">
                                <label>创建时间</label>
                                <input type="text" class="search-input" value="2025-12-01 10:00:00" readonly>
                            </div>
                            <div class="form-actions">
                                <button id="change-password-btn" class="btn btn-primary">修改密码</button>
                                <button id="update-profile-btn" class="btn btn-secondary">更新个人信息</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 知识库权限管理 -->
                    <div class="tab-content" id="tab-permission">
                        <div class="settings-container">
                            <div class="permission-controls">
                                <select id="permission-knowledge-select" class="search-input">
                                    <option value="">选择知识库</option>
                                </select>
                                <button id="add-permission-btn" class="btn btn-primary">添加权限</button>
                            </div>
                            <div class="permission-list" id="permission-list">
                                <div class="permission-item">
                                    <div class="permission-item-info">
                                        <div class="permission-item-name">张三</div>
                                        <div class="permission-item-email">zhangsan@example.com</div>
                                    </div>
                                    <div class="permission-item-role">管理员</div>
                                    <div class="permission-item-actions">
                                        <button class="btn btn-secondary btn-sm">编辑</button>
                                        <button class="btn btn-danger btn-sm">删除</button>
                                    </div>
                                </div>
                                <div class="permission-item">
                                    <div class="permission-item-info">
                                        <div class="permission-item-name">李四</div>
                                        <div class="permission-item-email">lisi@example.com</div>
                                    </div>
                                    <div class="permission-item-role">编辑者</div>
                                    <div class="permission-item-actions">
                                        <button class="btn btn-secondary btn-sm">编辑</button>
                                        <button class="btn btn-danger btn-sm">删除</button>
                                    </div>
                                </div>
                                <div class="permission-item">
                                    <div class="permission-item-info">
                                        <div class="permission-item-name">王五</div>
                                        <div class="permission-item-email">wangwu@example.com</div>
                                    </div>
                                    <div class="permission-item-role">读者</div>
                                    <div class="permission-item-actions">
                                        <button class="btn btn-secondary btn-sm">编辑</button>
                                        <button class="btn btn-danger btn-sm">删除</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>

        <!-- 底部信息 -->
        <footer class="footer">
            <p>&copy; 2025 KPS-知识库管理系统</p>
        </footer>
    </div>

    <!-- 模态框 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">模态框标题</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- 模态框内容将通过JavaScript动态加载 -->
            </div>
            <div class="modal-footer">
                <button id="modal-cancel" class="btn btn-secondary">取消</button>
                <button id="modal-confirm" class="btn btn-primary">确认</button>
            </div>
        </div>
    </div>

    <!-- 通知组件 -->
    <div id="notification" class="notification"></div>

    <script src="script.js"></script>
</body>
</html>